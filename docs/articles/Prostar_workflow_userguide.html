<!DOCTYPE html>
<!-- Generated by pkgdown: do not edit by hand --><html lang="en">
<head>
<meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
<meta charset="utf-8">
<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Inside Prostar core 2 • Prostar2</title>
<!-- favicons --><link rel="icon" type="image/png" sizes="16x16" href="../favicon-16x16.png">
<link rel="icon" type="image/png" sizes="32x32" href="../favicon-32x32.png">
<link rel="apple-touch-icon" type="image/png" sizes="180x180" href="../apple-touch-icon.png">
<link rel="apple-touch-icon" type="image/png" sizes="120x120" href="../apple-touch-icon-120x120.png">
<link rel="apple-touch-icon" type="image/png" sizes="76x76" href="../apple-touch-icon-76x76.png">
<link rel="apple-touch-icon" type="image/png" sizes="60x60" href="../apple-touch-icon-60x60.png">
<!-- jquery --><script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.7.1/jquery.min.js" integrity="sha512-v2CJ7UaYy4JwqLDIrZUI/4hqeoQieOmAZNXBeQyjo21dadnwR+8ZaIJVT8EE2iyI61OV8e6M8PP2/4hpQINQ/g==" crossorigin="anonymous" referrerpolicy="no-referrer"></script><!-- Bootstrap --><link href="https://cdnjs.cloudflare.com/ajax/libs/bootswatch/3.4.0/cerulean/bootstrap.min.css" rel="stylesheet" crossorigin="anonymous">
<script src="https://cdnjs.cloudflare.com/ajax/libs/twitter-bootstrap/3.4.1/js/bootstrap.min.js" integrity="sha256-nuL8/2cJ5NDSSwnKD8VqreErSWHtnEP9E7AySL+1ev4=" crossorigin="anonymous"></script><!-- bootstrap-toc --><link rel="stylesheet" href="../bootstrap-toc.css">
<script src="../bootstrap-toc.js"></script><!-- Font Awesome icons --><link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.12.1/css/all.min.css" integrity="sha256-mmgLkCYLUQbXn0B1SRqzHar6dCnv9oZFPEC1g1cwlkk=" crossorigin="anonymous">
<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.12.1/css/v4-shims.min.css" integrity="sha256-wZjR52fzng1pJHwx4aV2AO3yyTOXrcDW7jBpJtTwVxw=" crossorigin="anonymous">
<!-- clipboard.js --><script src="https://cdnjs.cloudflare.com/ajax/libs/clipboard.js/2.0.6/clipboard.min.js" integrity="sha256-inc5kl9MA1hkeYUt+EC3BhlIgyp/2jDIyBLS6k3UxPI=" crossorigin="anonymous"></script><!-- headroom.js --><script src="https://cdnjs.cloudflare.com/ajax/libs/headroom/0.11.0/headroom.min.js" integrity="sha256-AsUX4SJE1+yuDu5+mAVzJbuYNPHj/WroHuZ8Ir/CkE0=" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/headroom/0.11.0/jQuery.headroom.min.js" integrity="sha256-ZX/yNShbjqsohH1k95liqY9Gd8uOiE1S4vZc+9KQ1K4=" crossorigin="anonymous"></script><!-- pkgdown --><link href="../pkgdown.css" rel="stylesheet">
<script src="../pkgdown.js"></script><meta property="og:title" content="Inside Prostar core 2">
<!-- mathjax --><script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/MathJax.js" integrity="sha256-nvJJv9wWKEm88qvoQl9ekL2J+k/RWIsaSScxxlsrv8k=" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/config/TeX-AMS-MML_HTMLorMML.js" integrity="sha256-84DKXVJXs0/F8OTMzX4UR909+jtl4G7SPypPavF+GfA=" crossorigin="anonymous"></script><!--[if lt IE 9]>
<script src="https://oss.maxcdn.com/html5shiv/3.7.3/html5shiv.min.js"></script>
<script src="https://oss.maxcdn.com/respond/1.4.2/respond.min.js"></script>
<![endif]-->
</head>
<body data-spy="scroll" data-target="#toc">


    <div class="container template-article">
      <header><div class="navbar navbar-default navbar-fixed-top" role="navigation">
  <div class="container">
    <div class="navbar-header">
      <button type="button" class="navbar-toggle collapsed" data-toggle="collapse" data-target="#navbar" aria-expanded="false">
        <span class="sr-only">Toggle navigation</span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
      </button>
      <span class="navbar-brand">
        <a class="navbar-link" href="../index.html">Prostar2</a>
        <span class="version label label-default" data-toggle="tooltip" data-placement="bottom" title="">0.99.6</span>
      </span>
    </div>

    <div id="navbar" class="navbar-collapse collapse">
      <ul class="nav navbar-nav">
<li>
  <a href="../reference/index.html">Methods</a>
</li>
<li>
  <a href="../news/index.html">News</a>
</li>
<li class="dropdown">
  <a href="#" class="dropdown-toggle" data-toggle="dropdown" role="button" data-bs-toggle="dropdown" aria-expanded="false">
    Articles

    <span class="caret"></span>
  </a>
  <ul class="dropdown-menu" role="menu">
<li>
      <a href="../articles/Prostar2.html">Prostar2</a>
    </li>
    <li>
      <a href="../articles/Build-a-pipeline-module.html">Build a pipeline module</a>
    </li>
    <li>
      <a href="../articles/Create-a-new-pipeline-tutorial.html">Create a new pipeline tutorial</a>
    </li>
    <li>
      <a href="../articles/Prostar_dev_guideline.html">Prostar: dev guideline</a>
    </li>
    <li>
      <a href="../articles/Prostar_workflow_userguide.html">Prostar: workflow userguide</a>
    </li>
  </ul>
</li>
      </ul>
<ul class="nav navbar-nav navbar-right">
<li>
  <a href="https://github.com/samWieczorek/DAPAR2" class="external-link">
    <span class="fa fa-github"></span>

  </a>
</li>
<li>
  <a href="https://support.bioconductor.org/" class="external-link">
    <span class="fa fa-users"></span>

  </a>
</li>
      </ul>
</div>
<!--/.nav-collapse -->
  </div>
<!--/.container -->
</div>
<!--/.navbar -->



      </header><div class="row">
  <div class="col-md-9 contents">
    <div class="page-header toc-ignore">
      <h1 data-toc-skip>Inside Prostar core 2</h1>
            <h3 data-toc-skip class="subtitle">A developer’s
guidelines</h3>
                        <h4 data-toc-skip class="author">Samuel
Wieczorek</h4>
            
            <h4 data-toc-skip class="date">octobre 03, 2024</h4>
      

      <div class="hidden name"><code>Prostar_workflow_userguide.Rmd</code></div>

    </div>

    
    
<script type="text/javascript">
document.addEventListener("DOMContentLoaded", function() {
  document.querySelector("h1").className = "title";
});
</script><script type="text/javascript">
document.addEventListener("DOMContentLoaded", function() {
  var links = document.links;  
  for (var i = 0, linksLength = links.length; i < linksLength; i++)
    if (links[i].hostname != window.location.hostname)
      links[i].target = '_blank';
});
</script><div class="section level2">
<h2 id="introduction">Introduction<a class="anchor" aria-label="anchor" href="#introduction"></a>
</h2>
<p>This vignette aims to describe the core code of Prostar and is
addressed to developers. It describes how Prostar works in terms of
information system and how it is built. This document is written as a
tutorial to be followed step-by-step in order to understand the
different parts of the shiny app.</p>
<p>Prostar is thought to be as much generic as possible. This has the
great advantage to be easier for a developer to implement new process
modules and new pipelines. The counterpart of this feature is that the
code of the core part maybe be a bit complex to understand due to the
heavy use of variables. This is why the nomenclature is extremely
important when coding Prostar</p>
<p>This is also another reason for that tutorial made step-by-step</p>
</div>
<div class="section level2">
<h2 id="introducing-prostar-2-0">Introducing Prostar 2.0<a class="anchor" aria-label="anchor" href="#introducing-prostar-2-0"></a>
</h2>
<div class="section level3">
<h3 id="a-collection-of-modules">A collection of modules<a class="anchor" aria-label="anchor" href="#a-collection-of-modules"></a>
</h3>
</div>
</div>
<div class="section level2">
<h2 id="workflows-as-prostar-core">Workflows as prostar core<a class="anchor" aria-label="anchor" href="#workflows-as-prostar-core"></a>
</h2>
<div class="section level3">
<h3 id="introduction-key-advantages">Introduction, key advantages<a class="anchor" aria-label="anchor" href="#introduction-key-advantages"></a>
</h3>
<p>Prostar is able to treat objects structured as a list of items, each
of these are datasets. Generally, when a data process is run on such an
object , it runs an the last dataset and return an object with a new
dataset at the end of the list. This new dataset is the result of the
data processing module. This result can affect either quantitative data
in the dataset or just its metadata.</p>
<p>Thus, any data processing module developed for Prostar is an analysis
unit which input is an list of n datasets and the output is n list of
n+1 datasets. This is a mandatory requirement.</p>
<p>Actually, Prostar uses the class [QFeatures] as main object and each
dataset that it is composed of is an object of class
[SummarizedExperiment]</p>
<p>Data processing modules are very similar to general workflows as they
are composed of a serie of steps, each one working on the result of a
previous one. To implement this type of xxx in the user interface, one
uses ‘timelines’</p>
</div>
<div class="section level3">
<h3 id="timelines-to-navigate-into-workflows">Timelines to navigate into workflows<a class="anchor" aria-label="anchor" href="#timelines-to-navigate-into-workflows"></a>
</h3>
<p>The timelines implemented in Prostar have the following
characteristics:</p>
<ul>
<li>a main centered part which displays the timeline with
steps/processes which composed the object workflow,</li>
<li>a ‘reset’ button to reset the current workflow</li>
<li>two buttons ‘next’ and ‘previous’ to navigate in the timeline</li>
</ul>
<p>The effects of each button will be discussed in the sections related
to workflows and processing modules.</p>
</div>
<div class="section level3">
<h3 id="data-processing-modules">Data processing modules<a class="anchor" aria-label="anchor" href="#data-processing-modules"></a>
</h3>
<p>As we see previously, a data processing module is a unit of treatment
which takes an object (list of n datasets) as input and return an object
(list of n+1 datasets). It is composed of one or more steps, each step
using the result of a previous step. Thus, the basic behaviour of a
processing module is very similar to the workflow: data processing is
straightforward. Steps are also tagged mandatory or not and can be
skipped if they are not.</p>
<p>At the end of each processing module, the user have to validate it.
By this action, it creates the final dataset, adds it to the object
received in input and returns it</p>
<div class="section level4">
<h4 id="timeline-features">Timeline features<a class="anchor" aria-label="anchor" href="#timeline-features"></a>
</h4>
<p>The behaviour of the timeline used in the general workflow is similar
in many points to the data processing modules</p>
<p>The ‘next’and ’previous’ buttons can be enabled or disabled w.r.t the
current position. Let i in [1, n] be the current position</p>
<table style="width:100%;" class="table">
<colgroup>
<col width="36%">
<col width="31%">
<col width="31%">
</colgroup>
<thead><tr class="header">
<th align="left">current position i</th>
<th align="center">Previous button</th>
<th align="right">Next button</th>
</tr></thead>
<tbody>
<tr class="odd">
<td align="left">i = 1 (start of the timeline)</td>
<td align="center">Disabled</td>
<td align="right">enabled because there is at least one further
processing module</td>
</tr>
<tr class="even">
<td align="left">1 &lt; i &lt; n</td>
<td align="center">enabled</td>
<td align="right">enabled if there are further processing modules and if
module(i) is not mandatory</td>
</tr>
<tr class="odd">
<td align="left">i = n (end of the timeline)</td>
<td align="center">Enabled</td>
<td align="right">Disabled</td>
</tr>
</tbody>
</table>
<p>Note that the ‘Reset’ button is always enabled.</p>
</div>
<div class="section level4">
<h4 id="behaviour">Behaviour<a class="anchor" aria-label="anchor" href="#behaviour"></a>
</h4>
<p>The ‘prev’ button needs two conditions being TRUE to be enabled: * if
there is at least one more step backward, * if the process is not yet
validated (otherwise, the user must use the ‘undo’ button)</p>
<p>The ‘prev’ button needs two conditions being TRUE to be enabled: * if
there is at least one more step backward, * if the process is not yet
validated (otherwise, the user must use the ‘undo’ button)</p>
<p>The ‘reset’ button is only enabled while the user fill the UI and has
not yet clicked on the ‘validate’ button. Its effects is to set all
inputs of the process to their default value.</p>
<p>If the user goes backward on a previous step and validate this step,
then the following steps are automatically set to ‘undone’ and have to
be rerun. This guarantees that the steps are always done in the same
way. This feature must be implemented in each module source code. It
cannot be coded in the navigation module (recursive loop on the listener
of isDone vector)</p>
<p>The undo button is enabled only if the user is on the last step and
has validated it.The action is the same as reset but, in addition, we
get back the previous dataset</p>
</div>
<div class="section level4">
<h4 id="writing-your-own-processing-module">Writing your own processing module<a class="anchor" aria-label="anchor" href="#writing-your-own-processing-module"></a>
</h4>
<p>One of the main feature of Prostar 2.0 is the ability given to a
developer to easily write its own data processing module.</p>
</div>
</div>
<div class="section level3">
<h3 id="generalities">Generalities<a class="anchor" aria-label="anchor" href="#generalities"></a>
</h3>
<p>A process module takes as parameter one dataset of ‘n’ items returns
a dataset of n + 1 items. The return value of the process p is the last
item of the dataset. A dataset cannot be run several times on its own
result</p>
</div>
</div>
<div class="section level2">
<h2 id="workflows">Workflows<a class="anchor" aria-label="anchor" href="#workflows"></a>
</h2>
<p>Prostar implements workflows which are composed of one or more data
processing units called ‘data process modules’. The different workflows
available in Prostar are defined in a configuration file. Each workflow
is specific to a particular analysis of data (proteomic, peptidomic,
p2p, etc…)</p>
<p>The design of each workflow is the result of xxx. Thus, in a classic
run, each data processing module must be run in the right order from the
first one to the last one. The default direction for running a workflow
in straightforward. Data processing modules in a workflow are tagged
whether they are mandatory or not. This allows a user to bypass a
particular processing module if it is not mandatory.</p>
<p>A data processing module is mandatory in two cases:</p>
<ul>
<li>if it has been judged necessary for the analysis of the
dataset,</li>
<li>if its result is required to run further modules in the
workflow.</li>
</ul>
<p>Another option is to get back in the workflow timeline to rerun a
process module or to run a skipped process. In both cases, in order to
satisfy the general paradigm of Prostar’s workflow, when the user gets
back and run a previous process, then all further datasets are deleted
and the last one is the result of the process just run.</p>
<p>In a more formal way, let:</p>
<ul>
<li>W = {mod_1, …, mod_n} a workflow of n data processing modules,</li>
<li>obj = [data1, …, data_m ] the object (a list) composed of m datasets
; each of these are the result of their corresponding module</li>
</ul>
<p>If there are any skipped process, then n = m and the dataset obj(i)
is the result of the process W(i). This is not true in case of skipped
process. The only thing that one can be sure if that obj(1) is the
result of W(1). So, in the general case, one have:</p>
<ul>
<li>W(1) gives obj(1)</li>
<li>m &lt;= n</li>
</ul>
<p>The first position in the timeline is always validated and not
mandatory as it is an description of the workflow. Thus, there is at
least one processing module straightforward.</p>
<div class="section level4">
<h4 id="timeline-features-1">Timeline features<a class="anchor" aria-label="anchor" href="#timeline-features-1"></a>
</h4>
<p>The behaviour of the timeline used in the general workflow is similar
in many points to the data processing modules</p>
<p>The ‘next’and ’previous’ buttons can be enabled or disabled w.r.t the
current position. Let i in [1, n] be the current position</p>
<table style="width:100%;" class="table">
<colgroup>
<col width="36%">
<col width="31%">
<col width="31%">
</colgroup>
<thead><tr class="header">
<th align="left">current position i</th>
<th align="center">Previous button</th>
<th align="right">Next button</th>
</tr></thead>
<tbody>
<tr class="odd">
<td align="left">i = 1 (start of the timeline)</td>
<td align="center">Disabled</td>
<td align="right">enabled because there is at least one further
processing module</td>
</tr>
<tr class="even">
<td align="left">1 &lt; i &lt; n</td>
<td align="center">enabled</td>
<td align="right">enabled if there are further processing modules and if
module(i) is not mandatory</td>
</tr>
<tr class="odd">
<td align="left">i = n (end of the timeline)</td>
<td align="center">Enabled</td>
<td align="right">Disabled</td>
</tr>
</tbody>
</table>
<p>Note that the ‘Reset’ button is always enabled.</p>
</div>
<div class="section level4">
<h4 id="behaviour-1">Behaviour<a class="anchor" aria-label="anchor" href="#behaviour-1"></a>
</h4>
<p>The ‘prev’ button needs two conditions being TRUE to be enabled: * if
there is at least one more step backward, * if the process is not yet
validated (otherwise, the user must use the ‘undo’ button)</p>
<p>The ‘prev’ button needs two conditions being TRUE to be enabled: * if
there is at least one more step backward, * if the process is not yet
validated (otherwise, the user must use the ‘undo’ button)</p>
<p>The ‘reset’ button is only enabled while the user fill the UI and has
not yet clicked on the ‘validate’ button. Its effects is to set all
inputs of the process to their default value.</p>
<p>If the user goes backward on a previous step and validate this step,
then the following steps are automatically set to ‘undone’ and have to
be rerun. This guarantees that the steps are always done in the same
way. This feature must be implemented in each module source code. It
cannot be coded in the navigation module (recursive loop on the listener
of isDone vector)</p>
<p>The undo button is enabled only if the user is on the last step and
has validated it.The action is the same as reset but, in addition, we
get back the previous dataset</p>
</div>
<div class="section level4">
<h4 id="example">Example<a class="anchor" aria-label="anchor" href="#example"></a>
</h4>
</div>
</div>
<div class="section level2">
<h2 id="understanding-the-source-code-of-workflows">Understanding the source code of workflows<a class="anchor" aria-label="anchor" href="#understanding-the-source-code-of-workflows"></a>
</h2>
<div class="section level3">
<h3 id="initialization-of-a-navigation-module-instance">Initialization of a navigation module instance<a class="anchor" aria-label="anchor" href="#initialization-of-a-navigation-module-instance"></a>
</h3>
<p>At start,</p>
<ul>
<li>‘Reset’: Each process module has a ‘Reset’ button which allows to
set all inputs and plots to their default value if the validation button
has not been clicked yet. If the process has several steps, the screen
returns to the first one.</li>
<li>‘Validate’: Each process module has a ‘Validate’ button which allows
to record the new item at the end of the dataset and return the new
dataset to Prostar core. After clicking, the screen is not updated: all
the inputs keep their current value and the ui is kept to the last
step.</li>
</ul>
<p>The code for the UI is composed of a list a several elements used in
the navigation module (mod_navigation.R).</p>
<div class="sourceCode" id="cb1"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">r.nav</span> <span class="op">&lt;-</span> <span class="fu">reactiveValues</span><span class="op">(</span></span>
<span>    name <span class="op">=</span> <span class="st">"test"</span>,</span>
<span>    stepsNames <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="st">"Screen 1"</span>, <span class="st">"Screen 2"</span>,<span class="st">"Screen 3"</span><span class="op">)</span>,</span>
<span>    ll.UI <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/list.html" class="external-link">list</a></span><span class="op">(</span> screenStep1 <span class="op">=</span> <span class="fu">uiOutput</span><span class="op">(</span><span class="st">"screen1"</span><span class="op">)</span>,</span>
<span>                  screenStep2 <span class="op">=</span> <span class="fu">uiOutput</span><span class="op">(</span><span class="st">"screen2"</span><span class="op">)</span>,</span>
<span>                  screenStep3 <span class="op">=</span> <span class="fu">uiOutput</span><span class="op">(</span><span class="st">"screen3"</span><span class="op">)</span><span class="op">)</span>,</span>
<span>    isDone <span class="op">=</span>  <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="cn">FALSE</span>, <span class="cn">FALSE</span>, <span class="cn">FALSE</span><span class="op">)</span>,</span>
<span>    mandatory <span class="op">=</span>  <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="cn">FALSE</span>, <span class="cn">TRUE</span>, <span class="cn">FALSE</span><span class="op">)</span>,</span>
<span>    reset <span class="op">=</span> <span class="cn">FALSE</span>,</span>
<span>    skip <span class="op">=</span> <span class="cn">NULL</span>,</span>
<span>    undo <span class="op">=</span> <span class="cn">NULL</span></span>
<span>    </span>
<span>  <span class="op">)</span></span></code></pre></div>
<ul>
<li>name: the name of the process that is to be managed by the timeline
logics,</li>
<li>steps: A vector of names for the different steps of the
process,</li>
<li>ll.UI: a list in which each item is the UI for one of the screens of
the process. The length of this list is equal to the length of the
variables ‘steps’,</li>
<li>isDone: A vector of boolean to indicate whether each step has been
run by the user. SO, the length of this vector is also equal to the
length of the variables ‘steps’. By default, all the elements are set to
FALSE. They are set to TRUE by some a function in the process source
code. The communication between the process and the navigation module is
possible because of reactivity. So, if at any moment, an element is set
to TRUE by the process, then the corresponding tag is colored in green
in the timeline; otherwise, the default color is red if the step is
mandatory and orange otherwise,</li>
<li>isMandatory:</li>
<li>actions:</li>
</ul>
<p>UI Each process UI is composed of one or more screens which
correspond to the different steps of the process. The navigation between
each screen is realized by means of buttons placed on the right and the
left of the navigation UI (the ‘timeline’).</p>
<p>The timeline may take different aspects w.r.t the style applied. The
principle is to have</p>
<p>Several buttons are available: * the buttons ‘Prev’ (on the left) and
‘Next’ ‘on the right’ are always part of the timeline. AT the
initialization of the process, only the ‘Next’ button is visible and
disabled</p>
</div>
<div class="section level3">
<h3 id="logics-for-processes-and-datasets">Logics for processes and datasets<a class="anchor" aria-label="anchor" href="#logics-for-processes-and-datasets"></a>
</h3>
<p>Here are the different rules that exists in Prostar core to deal with
the different transactions between data processing modules and the
dataset. The UI of Prostar allows the user to navigate between those two
lists so as to rerun a process, fix a mistake in its parameters. But, to
guarantee that the workflow stay consistent with the
objective/philosophy of Prostar, some rules are implemented.</p>
<p>Each data processing modules and dataset can be seen as a list of
respectively P and N items. Let i, p be the indices of respectively the
current item in the dataset list and the current item in the process
list of the workflow.</p>
<p>The different combination of values for i and p (their relative
position) determines the behaviour of datasets and processes regarding
the general philosophy of Prostar.</p>
<p>Without any action of the user on the current item nor process,
Prostar follows the standard workflow:</p>
<ul>
<li>At the beginning of Prostar, i = 1 = N and p = 1</li>
<li>after the run of any process p, i = N = p -1 (the process has
produced a new item in the dataset)</li>
</ul>
<p>The user may change either the current item in the dataset or the
current process to be run. This leads to several situations.</p>
<div class="section level4">
<h4 id="default-standard-behaviour">Default (standard) behaviour<a class="anchor" aria-label="anchor" href="#default-standard-behaviour"></a>
</h4>
<ul>
<li><p>The default behaviour one have to see at the end of the execution
of the workflow is that it seems to has gone straightforwards in the
process list. It means that each process p runs on the item i=N and
generates a dataset of N+1 items. If next process to be run is p’, then
p’ &gt; p.</p></li>
<li><p>By default, the behaviour of a module process is to work on the
last item of the dataset; the resulting new item is appended to the list
of items. Thus, by default, the current indice i is set to the last item
of the dataset. For example, if the user starts the workflow with i = 1
(+ offset), p = 1, then at the end of the workflow, one must have i = N,
p = P with N = P + 1 (+ offset)</p></li>
<li><p>A process cannot be run more than one time on the same item. To
avoid that a process be run on the previous result of itself.</p></li>
</ul>
<p>But, the user may navigate differently in the process and dataset
lists. Thus, different situations may occur. Suppose we are after a
standard run, then p = P, i = N, i = p + 1</p>
</div>
<div class="section level4">
<h4 id="reprocess-a-previous-item-of-the-dataset">Reprocess a previous item of the dataset<a class="anchor" aria-label="anchor" href="#reprocess-a-previous-item-of-the-dataset"></a>
</h4>
<p>Suppose i = N and p = P (from the standard workflow). The user can
change the current item of the dataset (WHAT’S ITS GOAL ?????)</p>
<ul>
<li>i &lt; N (the current item is not the last one of the dataset): Two
cases has to be distinguished:
<ul>
<li>p = P ((the current process is the last process of the workflow):
xxx</li>
<li>p &lt; P (the current process is not the last one of the workflow):
xxx</li>
</ul>
</li>
</ul>
<p>In both cases, one delete all the items of the dataset from i+1 to N
then the new item (produced by the process) is appended to the dataset
list.</p>
<p>At the end of this sequence, the current indices must return to their
normal values (i = N, p = P). That means that the real workflow has been
modified by the user but the final workflow is like the standard one</p>
</div>
<div class="section level4">
<h4 id="section"></h4>
<ul>
<li>a l’affichage de l’UI d’un processus déjà exécuté auparavant:
<ul>
<li>si l’indice courant i est positionné sur le dernier élément du
dataset, alors affichage du début du processus,</li>
<li>si i est positionné sur un dataset précédent (i &lt; N) (le dataset
déjà traité par ce processus), alors on n’affiche que la dernière page
du processus</li>
</ul>
</li>
</ul>
</div>
</div>
<div class="section level3">
<h3 id="nomenclature">Nomenclature<a class="anchor" aria-label="anchor" href="#nomenclature"></a>
</h3>
<p>All the files containing code are stored in the directory R. The
modules are prefixed with ‘mod_’</p>
</div>
<div class="section level3">
<h3 id="test-modules">Test modules<a class="anchor" aria-label="anchor" href="#test-modules"></a>
</h3>
<p>Each module in the directory ‘R’ has a test file, located in
‘dev/test_dev’.</p>
</div>
</div>
<div class="section level2">
<h2 id="description-of-the-package-prostar">Description of the package Prostar<a class="anchor" aria-label="anchor" href="#description-of-the-package-prostar"></a>
</h2>
<p>Prostar is built with the [golem] package.</p>
</div>
<div class="section level2">
<h2 id="step-1--a-simple-shiny-app">Step 1. A simple Shiny App<a class="anchor" aria-label="anchor" href="#step-1--a-simple-shiny-app"></a>
</h2>
<p>Prostar is buil with the shiny framework and use the ‘navbar page
menu’ layout. Previous versions of Prostar used other layouts (such as
xxx) but the free space on the screen was too small to put all the
outputs.</p>
<p>First, let write a simple A</p>
<div class="section level3">
<h3 id="workflow-files">Workflow files<a class="anchor" aria-label="anchor" href="#workflow-files"></a>
</h3>
<p>In each directory of a workflow, there are several type of files
(module source code, watch modules code, miscellaneous code). As those
files are dynamically loaded in Prostar (and not at the same time), it
is necessary to identify in a unique manner each file with its function.
Two ways are possible to do that: * build a complex hierarchy of
directories in which directory correspond to a specific function, * name
each source code file with a complex name</p>
<p>Actually, Prostar’s files structure uses the second point. In the
directory of a workflow, the module’s files are composed of four strings
separated by a ’_‘: * ’mod’ which is the prefix used by the package
[golem] to identify the modules, * the name of the workflow. It seems
obvious because we are in the directory of the wf but it is more for the
eyes of the developer and for make easiest the reading of the name of
the files, * the name of the process itself.</p>
<p>For the files containing the code to launch the server part of each
module, we have prefixed the names by ‘watch_’</p>
</div>
</div>
<div class="section level2">
<h2 id="ui-side">UI side<a class="anchor" aria-label="anchor" href="#ui-side"></a>
</h2>
<p>The code for the ui side of Prostar is in the file ‘R/app_ui.R’. It
consists in two main parts: * a loading page (div id = ‘loading_page’),
* the ui of Prostar (‘main_content’)</p>
<p>It is based on the navbarPage layout (see xxx) in the shiny package.
There are several static menus (and submenus) that are present even if
no dataset is loaded:</p>
<ul>
<li>
<strong>Prostar</strong>:
<ul>
<li>Home:</li>
<li>Global settings:</li>
<li>Release notes:</li>
<li>Check for updates</li>
</ul>
</li>
<li>
<strong>Data manager</strong>:
<ul>
<li>Open MSnset: ui to open a dataset previously created by the
user,</li>
<li>Convert: through several steps, converts Excel or CSV files
containing quantitative data to an object of class QFeatures, which is
the format admitted in Prostar,</li>
<li>Demo data</li>
<li>Reload Prostar</li>
</ul>
</li>
<li>
<strong>Data processing</strong>:
<ul>
<li>Descriptive statistics:</li>
</ul>
</li>
<li>
<strong>Help</strong>:
<ul>
<li>Links:</li>
<li>FAQ:</li>
<li>Bug report</li>
</ul>
</li>
</ul>
<p>All of these submenus are implemented as modules : there ui parts are
called her and their server part are called from the server side of
Prostar (R/app_server.R).</p>
</div>
<div class="section level2">
<h2 id="server-side">Server side<a class="anchor" aria-label="anchor" href="#server-side"></a>
</h2>
<p>The code for the server side of Prostar is in the file
‘R/app_server.R’.</p>
<div class="section level3">
<h3 id="declaration-of-global-reactive-variables">Declaration of global reactive variables<a class="anchor" aria-label="anchor" href="#declaration-of-global-reactive-variables"></a>
</h3>
</div>
<div class="section level3">
<h3 id="call-to-server-modules">Call to server modules<a class="anchor" aria-label="anchor" href="#call-to-server-modules"></a>
</h3>
<p>The server-side of all the modules which ui are declared in the
app_ui.R file are called in this file.</p>
</div>
</div>
<div class="section level2">
<h2 id="load-a-dataset-and-corresponding-modules">Load a dataset and corresponding modules<a class="anchor" aria-label="anchor" href="#load-a-dataset-and-corresponding-modules"></a>
</h2>
<p>Once a dataset is loaded in prostar (the variable xxx is
instanciated), Prostar launches the different modules that are part of
the pipeline previously choosen by the user. The list of modules in that
pipeline are stored in the file ‘config.R’</p>
<div class="section level3">
<h3 id="config-r">Config.R<a class="anchor" aria-label="anchor" href="#config-r"></a>
</h3>
<p>This file contains the definition of pipelines, ie the list of
processing modules included in the pipeline. For example, here is the
definition for the protein pipeline.</p>
<div class="sourceCode" id="cb2"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb2-1"><a href="#cb2-1" tabindex="-1"></a>pipeline.defs <span class="ot">&lt;-</span> <span class="fu">list</span>(</span>
<span id="cb2-2"><a href="#cb2-2" tabindex="-1"></a>  <span class="at">protein =</span> <span class="fu">c</span>(<span class="st">'Filtering'</span>,</span>
<span id="cb2-3"><a href="#cb2-3" tabindex="-1"></a>              <span class="st">'Normalization'</span>,</span>
<span id="cb2-4"><a href="#cb2-4" tabindex="-1"></a>              <span class="st">'Imputation'</span>)</span>
<span id="cb2-5"><a href="#cb2-5" tabindex="-1"></a>)</span>
<span id="cb2-6"><a href="#cb2-6" tabindex="-1"></a><span class="er">}</span></span></code></pre></div>
<p>If a developer wants to implement a new pipeline, he has to complete
the definition while respecting the nomenclature of the items of the
list. This is very important since Prostar maps theses names with source
code files.</p>
</div>
</div>
  </div>

  <div class="col-md-3 hidden-xs hidden-sm" id="pkgdown-sidebar">

      </div>

</div>



      <footer><div class="copyright">
  <p></p>
<p>Developed by Samuel Wieczorek, Thomas Burger.</p>
</div>

<div class="pkgdown">
  <p></p>
<p>Site built with <a href="https://pkgdown.r-lib.org/" class="external-link">pkgdown</a> 2.1.1.</p>
</div>

      </footer>
</div>






  </body>
</html>
